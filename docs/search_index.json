[
["index.html", "Sentinel Asia Handbook Preface", " Sentinel Asia Handbook Firman Hadi, Syams Nashrrullah, Ayeisha Sheldon and Dan Tran 2019-10-09 Preface Due to the nature of the Sentinel Asia (SA) works which are related to disaster response, Value Added Products (VAPs) are expected to be produced as soon as the data are available. The book serves as a guidance for streamlining the process and techniques for data processing related to SA Activities. Hence, it is expected that the book will help in reaching the objective. "],
["preparation.html", "Chapter 1 Preparation 1.1 Hardwares 1.2 Softwares 1.3 Standard Operational Procedures", " Chapter 1 Preparation To conduct Sentinel Asia activities, there are several things that need to be prepared, (1) Hardware, (2) softwares and (3) Standard Operational Procedures. 1.1 Hardwares There are three main computers used for Sentinel Asia works, (1) CentOS Linux , (2) Windows PC and (3) MacPro. CentOS Linux is used as Image Management System, activating scripts for PDAN website and serve as data storage downloaded from Sentinel Asia website. Since we will not continue to use PDAN website, CentOS Linux can be develop as the server for crowdsourcing or field validation by implementing DRMSurvey or Ushahidi for example. Windows PC is used to handle processing data related to flood, while MacPro is used to process data related to geological hazard such as volcano and earthquake. 1.2 Softwares The main softwares for processing data can be divided to proprietary and open source sofwares. ArcGIS and ENVI are main proprietary sofwares used, while for open source softwares, QGIS, SNAP and GMT5SAR are utilized. 1.3 Standard Operational Procedures Standard Operational Procedures (SOP) is the main procedure develop for each type of disasters. The main objective of writing this SOP is to standardize the process, so anyone can do the process with the same output or result. "],
["intro.html", "Chapter 2 Introduction 2.1 Project Manager (PM) Activities of International Disaster Charter (IDC) 2.2 Sentinel Asia Activities", " Chapter 2 Introduction Sentinel Asia is a voluntary initiative to provide satellite data at a time of a disaster, and to coordinate support in collaboration with data provider nodes (DPNs), data analysis nodes (DANs), and disaster management organizations (DMOs) in the Asia-Pacific region. Data analyses and value added product (VAP) generation is done through several agencies including the GIC/AIT, which is the Primary Data Analysis Node (P-DAN). Moreover, Sentinel Asia also supports activities on disaster risk reduction (DRR) to its member countries in the region. In this respect, technical and disaster management organizations are members of Sentinel Asia and are known as joint project team members (JPTM). The time lapse of work-flow from a disaster occurrence to the product delivery stage is an important factor that has a high impact on DRR activities. The work-flow is a process chain consisting of various stages such as an emergency observation request (EOR), Sentinel Asia activation, satellite observations, image processing and analyses, value-added product (VAPs) generation, product delivery and sharing. It is important to reduce the time gaps in this process chain. The GIC/AIT has provided the service as the P-DAN during the contract period. The main components of the works are (1) the Project Manager (PM) activities of the International Disaster Charter (IDC) and (2) generation, provision and evaluation of Value Added Products (VAPs). All the service for Sentinel Asia activation is provided by effectively communicating with the Sentinel Asia Secretariat and collecting related information in order to identify the severity and to monitor the progress after an activation. Assistance is provided to the authorized users (AU) of the Asian Disaster Reduction Center (ADRC) member countries to receive data and products in a timely manner and to share VAPs with the ADRC and its member countries. After the VAPs are generated, close communication is maintained during the contract period with DAN members of the Sentinel Asia-activated countries. 2.1 Project Manager (PM) Activities of International Disaster Charter (IDC) When a major disaster occurs, the Asian Disaster Reduction Center (ADRC) can escalate a Sentinel Asia emergency observation request to the International Disaster Charter (IDC). A project manager (PM), such as the GIC/AIT, will be nominated from relevant national agencies or international organizations. The PM role is to ensure effective communication between the data providers or partner agencies (PA), value added companies/resellers and authorized users (AU). The PM will coordinate the activation, ensuring that the acquisition of satellite images is under way, managing the generation of products or information, and making sure that the products are delivered to the users according to their needs and expectations. The Charter activation is considered closed 30 days after the initial activation date or when the end users have enough products for their requirements. The PM will then have to submit a report to the Charter Executive Secretariat (the member of the PA that nominated the PM – in this case the JAXA) - within 45 days of the initial activation date through email or the COS-2 system. The PM report will conclude the PM’s work for this Charter activation. 2.2 Sentinel Asia Activities As the primary data analysis node (P-DAN) of Sentinel Asia, the GIC/AIT has been effectively communicating with the Sentinel Asia Secretariat/ADRC and coordinating the response of DAN members for each emergency observation request. The GIC/AIT analyzed satellite data which provided by the data provider nodes (DPNs), and then created VAPs and shared such satellite-based disaster information products to end users in timely manner. "],
["sentinel-asia-activation-response-workflow.html", "Chapter 3 Sentinel Asia Activation Response Workflow 3.1 Immediate Response 3.2 Data provision and VAP generation", " Chapter 3 Sentinel Asia Activation Response Workflow Here is a the general procedure that should be followed during the Sentinel Asia Activation. 3.1 Immediate Response 3.1.1 Work management Create an activation folder in Kepler Track the observation plan of satellite data 3.1.2 Initial communication with requestor/end user Confirm the affected areas Update the most recent ground situation Identify the user needs of VAPs Request the user to share ground information 3.1.3 Download/preparing vector data The data for many of Asian countries have been prepared in ArcGIS Geodatabase. Please see Appendices to see how to connect to the Geodatabase. 3.1.4 Download other relevant data Download SRTM Download WorldPop 3.1.5 Initial data processing Create project in ArcGIS Pro Connect to the Country DataBase Identify the affected admin area Calculate slope from DEM 3.1.6 ArcGIS Online Create a project for the activation Create a rainfall monitoring tab Create a tab for social media integration 3.1.7 PDAN System Activate email notification Update PDAN website (front page) Create PDAN forum Integrate ArcGIS Online 3.1.8 Prepare activation report (using template) Write ‘Overview’ Write ‘Description of Disaster Situation’ Write ‘Disaster Affected Areas’ Write ‘Data Availability’ Write ‘Communication’ 3.2 Data provision and VAP generation 3.2.1 Work management Call for a meeting, if necessary Assign staffs available for data processing 3.2.2 Communication with requestor/end-user 3.2.2.1 Check and re-check Check the draft of VAP by overlaying it with OpenStreetMap data or other GIS services (Google etc.) "],
["pcservers-management.html", "Chapter 4 PC/Servers Management 4.1 ArcGIS Enterprise Geodatabase Connection 4.2 SQL Server 4.3 IMS-Server 4.4 Sentinel-PC 4.5 MacPro 4.6 Cloud Server (Google Compute Engine)", " Chapter 4 PC/Servers Management For Sentinel Asia and IDC Activation, we use several PC and servers for processing, storing data and results. 4.1 ArcGIS Enterprise Geodatabase Connection 4.1.1 Downloading SQL Server and setting it up Note: This needs to be completed only once before you can connect to the server. Download and install SQL sever This is found in KEPLA: \\203.159.29.17-Resources-Software_and_Tools_server Go through general installation prompts to install. Click next and agree to go through the installation steps. Features selection -select the boxes shown below Complete the rest of the steps and instal the server. 4.1.2 Connecting to Geodatabases Connecting to the server and the databases is important as it allows the user to find and locate common data. You can connect through either ArcCatalog or ArcGIS Pro Contents. Connecting through ArcCatalog: Open ArcCatalog Add Database connection as follows: Connect to the Database using the following fields: Figure 4.1: Username: gic, password: GICuser123 On the Database drop down list, here is where you select which database to connect to. Perform this step multiple times to connect to all relevant databases you want to access - once connected you won’t need to connect again. Databases: CDB - This is the common database with all common country data (vector) CDB_R - This it the common database with all raster data ArcGIS online - This is for ArcGIS Online files SA - Sentinel Asia SA_R - Sentinel Asia Raster Once the chosen Database is connected it will show on the side bar, y ou can rename this to the database name - double click this to open and view the data. All data in the database will show up here, with the database name followed by the file name. For the common database, all countries are clustered into raster datasets, click these to open. Note: Click description to find the corresponding names for country codes If you want to use this data in your map file, just drag the data into ArcMap from ArcCatalog, it will open like any file You can also access the database from ArcCatalog in the side bar of ArcMap: Following link in Youtube will provide you on the how to do the procedure https://youtu.be/3DWrBp_5MJc 4.2 SQL Server GIC Enterprise Databases are stored in SQL Server. The databases are regularly backup to Kepler and Google Drive (geoinfo ) 4.2.1 Maintenance 4.2.1.1 SQL Backup and Monitoring https://youtu.be/OBk0SdeB3IM 4.2.1.2 SQL Database Recovery We have to make one session to practice on how to recover database, in case of hard drive failure. 4.3 IMS-Server 4.3.1 Connection 4.4 Sentinel-PC 4.4.1 Connection https://www.youtube.com/watch?v=Dpx9NslsIqg&amp;feature=youtu.be 4.5 MacPro 4.5.1 Connection https://youtu.be/xje9lyKYTSw 4.6 Cloud Server (Google Compute Engine) In case of IDC activation, some of the data will be provided through FTP sites (port 21). FTP port is restricted at the office network, we have to download the data by using the server located in GIC Google Compute Engine. This method will also increase downloading speed from certain data provider (e.g., CNES). The method is explained in this video link https://youtu.be/NS6oLCNrGHg "],
["standard-operational-procedure-sop.html", "Chapter 5 Standard Operational Procedure (SOP) 5.1 Data Download 5.2 Data processing 5.3 Data Layout", " Chapter 5 Standard Operational Procedure (SOP) This chapter is arranged to different sections according to the most frequent type of disaster in previous Sentinel Asia Activities. On each section, the explanation will be based on available data. 5.1 Data Download 5.1.1 Sentinel Asia Website https://youtu.be/yZJi4FRw4Ps 5.1.2 IDC Data Download via FTP Data can be downloaded from Google Cloud Compute Engine via FTP and put in HTTP folder. 5.2 Data processing ###Flood 5.2.0.1 SAR 5.2.0.1.1 ArcGIS Before processing the data, it is better to check the processing level from the filename. The data (pre and post flood) was processed through 5 main steps: (1) Data processing including: Radiometric calibration, Speckle filtering, and Coordinate transformation; (2) Image differencing using image pre and post-flood; (3) Thresholding of backscatter changes; (4) Image filtering using majority filter; and (5) Mapping of flooded area. The methodology is shown in the figure below. Image for Workflow Figure 5.1: Flood Detection General Workflow (Step 1: ArcGIS Pro) Radiometric calibration, Speckle filtering, and Coordinate transformation Raster Function in ArcGIS Pro is used to process the images (pre and post-flood), with flowchart as follow: Figure 5.2: ALOS-2 radiometric and geometric calibration Workflow To convert raw image to sigma nought with the formula 20 * Log10(DN) – 83 Figure 5.3: ALOS-2 radiometric calibration formula To do image filtering with Lee filter (5x5 window size). Figure 5.4: ALOS-2 speckle reduction To convert coordinate to GCS_WGS_1984 Figure 5.5: Reprojection to GCS WGS84 (Step 2: ArcGIS Pro) Image differencing Using the Calculator raster function to create a difference image, with the formula Change = (Post-flood) - (Pre-flood) Figure 5.6: Image differencing (Step 3: ArcGIS Pro) Thresholding of backscatter changes Using the Calculator raster function to extract flood inundation areas from the result in step 2 with threshold &lt; -3. Figure 5.7: Image thresholding (Step 4: ArcGIS Pro) Image filtering Majority filter is applied to reduce noise (salt and pepper) from result in step 3. (ToolboxesAnalyst ToolsFilter) Figure 5.8: Image filtering Then, convert raster to polygon and export to shapefile (.shp) format for a further step in ArcMap. 5.2.0.1.2 QGIS Flood detection can be carried out in QGIS by using Graphical Modeling as shown in the following video https://youtu.be/HR_7kENFGT4 5.2.0.2 Optical data 5.2.0.3 Google Earth Engine (GEE) // Load Sentinel-1 images to map the flooding area, // This script was originally written by Simon Ilyushchenko (GEE team) // Default location var pt = ee.Geometry.Point(96.4633,17.79); //, , Grand Morin near Coulommiers // Load Sentinel-1 C-band SAR Ground Range collection (log scaling, VV co-polar, Descending) var collection = ee.ImageCollection(‘COPERNICUS/S1_GRD’).filterBounds(pt). filter(ee.Filter.listContains(‘transmitterReceiverPolarisation’, ‘VV’)). filter(ee.Filter.eq(‘orbitProperties_pass’, ‘DESCENDING’)). select(‘VV’); // Filter by date, ensure that the result will cover only 1 day var before = collection.filterDate(‘2016-05-5’, ‘2016-05-6’).mosaic(); var after = collection.filterDate(‘2018-07-24’, ‘2018-07-25’).mosaic(); // Threshold smoothed radar intensities to identify “flooded” areas. var SMOOTHING_RADIUS = 100; var DIFF_UPPER_THRESHOLD = -3; var diff_smoothed = after.focal_median(SMOOTHING_RADIUS, ‘circle’, ‘meters’) .subtract(before.focal_median(SMOOTHING_RADIUS, ‘circle’, ‘meters’)); var diff_thresholded = diff_smoothed.lt(DIFF_UPPER_THRESHOLD); //Define the extent for exporting the result var geometry = ee.Geometry.Rectangle([105.321, 20.3574, 106.971, 21.313473]); // Display map Map.centerObject(pt, 10); Map.addLayer(before, {min:-30,max:0}, ‘Before flood’); Map.addLayer(after, {min:-30,max:0}, ‘After flood’); Map.addLayer(after.subtract(before), {min:-10,max:10}, ‘After - before’, 0); Map.addLayer(diff_smoothed, {min:-10,max:10}, ‘diff smoothed’, 0); Map.addLayer(diff_thresholded.updateMask(diff_thresholded), {palette:“0000FF”},‘flooded areas - blue’,1); // Export the image, specifying scale and region. // Pre-flood Export.image.toDrive({ image: before, description: ‘MMM_image_SentinelBefore’, scale: 30, region: geometry }); // Post-flood Export.image.toDrive({ image: after, description: ‘MMM_image_SentinelAfter’, scale: 30, region: geometry }); //Flood Export.image.toDrive({ image: diff_thresholded, description: ‘MMM_image_SentinelFlood’, scale: 30, region: geometry }); 5.2.0.4 Permanent Water 5.2.1 Earthquake 5.2.1.1 GMT5SAR Client software If you use Windows, you have to install BitVise SSH Client. – The software can be downloaded from https://www.bitvise.com/ssh-client-download. BitVise SSH client provides terminal application to connect via SSH and – Create New Profile. Figure 5.9: Create New Profile in BitVise SSH Client – Save the profile as macpro in the folder. Figure 5.10: Saving the new profile – Fill in the New Profile and click Save Profile. Figure 5.11: Completing the profile – Click Login Figure 5.12: BitVise xterm Figure 5.13: BitVise SFTP If you use Mac or Linux, you can connect to MacPro by using Terminal. – Connect to MacPro with your provided username (e.g., dan@203.159.29.212) firmanhadi:~ firmanhadi$ ssh gic@203.159.29.212 Password: Folder and file preparation Go to Documents folder and create new folder (e.g., IDN3) IMS:~ gic$ cd Documents IMS:Documents gic$ mkdir IDN3 Go to IDN3 folder IMS:Documents gic$ cd IDN3 Create new folder (raw, topo) IMS:IDN3 gic$ mkdir raw &amp;&amp; mkdir topo Copy the config file from BOOTCAMP IMS:IDN3 gic$ cp /Volumes/BOOTCAMP/IDN_SAR/config.alos2.slc.txt . Confirm the structure of the folder IMS:IDN3 gic$ ls -l total 8 -rwxr-xr-x@ 1 gic staff 3605 Sep 6 10:37 config.alos2.slc.txt drwxr-xr-x 2 gic staff 68 Sep 6 10:31 raw drwxr-xr-x 2 gic staff 68 Sep 6 10:31 topo Download DEM from GMTSAR website With the browser in your computer, go to this link http://topex.ucsd.edu/gmtsar/demgen/ Enter the coordinate for north, south, east and west. The boundary cannot span more than 4 longitude by 4 latitude degrees. Click Generate to process. If it has finished, click Download to get the result. Extract the result to temporary folder in your computer Figure 5.14: Downloading DEM for GMT5SAR processing Copying the ALOS-2 data and DEM Copy the ALOS-2 data (IMG, LED and VOL- files) to raw folder Figure 5.15: Uploading ALOS-2 data to raw folder Extract the files downloaded from DEM Generation process in GMTSAR website and copy all of the files to topo folder. Figure 5.16: Uploading DEM files to topo folder Modifying config file If it is the first time in processing, set the value for proc_stage to 1 (proc_stage = 1). Set dummy value for SLC_factor, 4.0 (SLC_factor = 4.0). This is important as we will receive a warning message to change the value to the correct one. Set topo_phase to 1, to subtract topo_ra from the phase (topo_phase = 1) Set shift_topo to 0. Set switch_master to 1 if we assume master as repeat and slave as reference. Set it to 0, if we assume master as reference and slave image as repeat. The default value is 0 (switch_master = 0) For filtering, set filter_wavelength = 100, and filter1 = gauss_alos_100m. Set decimation of images to 1 if we want higher resolution image and set it to 2 if we want smaller resolution (dec_factor = 1). For training purpose, set it to 2. Set correlation threshold for snapu to 0.1 (threshold_snaphu = 0.1) Leave the option blank to unwrap the whole region (region_cut = ). Note that, in the latest version of GMT5SAR, this option will be executed if we write the config for interpolation (near_interp = 1). If we don’t put this option for interpolation, the result will be unwrapped to half of the image. For masking the Lake or Ocean, set switch_land to 1 (switch_land = 1). Set defomax = 0 for smoother unwrapped phase. Set threshold_geocode = .10 Running the InSAR process Under IDN3 folder, by using Command Line, run this command “p2p_ALOS2_SLC.csh IMG-master IMG-slave config.alos2.slc.txt”. Change IMG-master with the full file name of IMG as master and IMG-slave with the full file name of slave IMG. Wait for the process to finish. It will take some time depend on the CPU speed and also the type of data. SM1 data will take longer than SM3. The results will be created in intf folder, under IND folder. KML files can be opened using Google Earth. Files without _ll suffix are still in azimuth and range coordinates, those with _ll suffix mean already in Geographic Coordinate System WGS84. Converting to GeoTIFF Files with .grd extension can be opened using QGIS and then exported to GeoTIFF format. The results in TIFF extension are used in ArcMap for layouting. 5.2.2 Volcano 5.2.3 Landslide 5.2.4 Glacier Lake Outburst Flood 5.2.5 Oil Spill 5.2.6 Forest Fire 5.3 Data Layout 5.3.1 Check and re-check Check and re-check the draft of VAP before uploading to SA server. Compare the geometry with other available online data ## Data Upload to Server "],
["appendices.html", "Appendices", " Appendices ArcGIS Enterprise Geodatabase connection Useful Links ArcGIS Pro scripts Generalization script "]
]
